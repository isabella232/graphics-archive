{% extends 'base_template.html' %}

{% block content %}

    {% if COPY.labels.headline %}<h1>{{ COPY.labels.headline|smarty }}</h1>{% endif %}
    {% if COPY.labels.subhed %}<h2>{{ render(COPY.labels.subhed)|smarty }}</h2>{% endif %}

    <h3>{{ COPY.labels.hdr_net_change }}</h3>

    <div class="graphic" id="column-chart">
    </div>

    <div class="graphic" id="poll-data">
      <div class="poll-data dec">
        <div class="hdr">{{ COPY.labels.hdr_dec }}</div>
        {% for group in COPY.data %}
        <div class="group {{ group.group|classify }} {{ group.group_mobile|classify }}" data-group="{{ group.group }}">
          <ul>
            <li><b>Favorable: </b><b>{{ group.dec_approve|int }}%</b></li>
            <li><b>Unfavorable: </b><b>{{ group.dec_disapprove|int }}%</b></li>
            <li><b>Unsure: </b><b>{{ group.dec_unsure|int }}%</b></li>
            <li class="net {% if group.dec_net|int < 0 %}negative{% endif %}"><b>Net: </b><b>{% if group.dec_net|int > 0 %}+{% endif %}{{ group.dec_net|int }} {% if group.dec_net|int != 1 %}pts.{% else %}pt.{% endif %}</b></li>
          </ul>
        </div>
        {% endfor %}
      </div>

      <div class="poll-data mar">
        <div class="hdr">{{ COPY.labels.hdr_mar }}</div>
        {% for group in COPY.data %}
        <div class="group {{ group.group|classify }} {{ group.group_mobile|classify }}" data-group="{{ group.group }}">
          <ul>
            <li><b>Favorable: </b><b>{{ group.mar_approve|int }}%</b></li>
            <li><b>Unfavorable: </b><b>{{ group.mar_disapprove|int }}%</b></li>
            <li><b>Unsure: </b><b>{{ group.mar_unsure|int }}%</b></li>
            <li class="net {% if group.mar_net|int < 0 %}negative{% endif %}"><b>Net: </b><b>{% if group.mar_net|int > 0 %}+{% endif %}{{ group.mar_net|int }} {% if group.mar_net|int != 1 %}pts.{% else %}pt.{% endif %}</b></li>
          </ul>
        </div>
        {% endfor %}
      </div>
    </div>

    {% if COPY.labels.footnote %}
    <div class="footnotes">
        <h4>Notes</h4>
        <p>{{ COPY.labels.footnote|smarty }}</p>
    </div>
    {% endif %}

    <div class="footer">
        {% if COPY.labels.source %}<p>Source: {{ COPY.labels.source|smarty }}</p>{% endif %}
        {% if COPY.labels.credit %}<p>Credit: {{ COPY.labels.credit|smarty }}</p>{% endif %}
    </div>

    <script type="text/javascript">
        var DATA = {{ COPY.data.json() }};
        var LABELS = {{ COPY.labels.json() }};
    </script>
{% endblock content %}
